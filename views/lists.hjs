<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/new-style.css' />
    <link rel='stylesheet' href='/stylesheets/bootstrap.css' />
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">

$(function () {
	// test stackoverflow upvote button
	$('.vote').click(function () {
		if ($(this).hasClass(''))
  		$(this).toggleClass('on');
	});	

	$('.arrow-down, .arrow-up').click(function () {
  		
  		if ($(this).hasClass('arrow-up')) {

  			// TEST
  			console.log('$(this).hasClass(arrow-up):');
  			console.log($(this).hasClass('arrow-up'));
  			console.log(
  				$(this).parent().children('.netVote')
  				.text()
  				);
  			console.log("$(this).parent().children('.netVote').text()");  			

  			// if oredy on, cancel upvote
  			// if not, do upvote
  			if ($(this).hasClass('on')) {
  				// cancel  upvote ie decrement netVote
  				$(this).parent().children('.netVote')
  					.text(
  						Number($(this).parent().children('.netVote').text()) - 1
  					);
  				// toggle color
  				$(this).toggleClass('on');
  			} else {
	  			// do upvote ie increment upvote
	  			$(this).parent().children('.netVote')
	  				.text(
	  					Number($(this).parent().children('.netVote').text()) + 1
	  				);  		
	  			// toggle color
  				$(this).toggleClass('on');
  			}

  			// double upvote if true
  			if ($('.arrow-down').hasClass('on')) {
	  			// do upvote ie increment upvote
	  			$(this).parent().children('.netVote')
	  				.text(
	  					Number($(this).parent().children('.netVote').text()) + 1
	  				);  		  				
  			}

  			// turn down-arrow to color grey (sorta de-clickit)
  			$('.arrow-down').removeClass('on');

  		} else if ($(this).hasClass('arrow-down')) {

  			// TEST
  			console.log('$(this).hasClass(arrow-up):');
  			console.log($(this).hasClass('arrow-up'));	

  			// if oredy on, cancel upvote
  			// if not, do upvote
  			if ($(this).hasClass('on')) {
  				// cancel downvote ie increment netVote
  				$(this).parent().children('.netVote')
  					.text(
  						Number($(this).parent().children('.netVote').text()) + 1
  					);
  				// toggle color
  				$(this).toggleClass('on');
  			} else {
	  			// do downvote ie decrement upvote
	  			$(this).parent().children('.netVote')
	  				.text(
	  					Number($(this).parent().children('.netVote').text()) - 1
	  				);  		
	  			// toggle color		
  				$(this).toggleClass('on');
  			}

  			// double downvote if true
  			if ($('.arrow-up').hasClass('on')) {
	  			// do upvote ie increment upvote
	  			$(this).parent().children('.netVote')
	  				.text(
	  					Number($(this).parent().children('.netVote').text()) - 1
	  				);  		  				
  			}  			

  			// turn up-arrow to color grey (sorta de-clickit)
  			$('.arrow-up').removeClass('on');  			
  		}
  		
	});	
});
    </script>
  </head>
  <body>
    <h1>{{ title }}</h1>
   	<br>    
    {{#lists}}

	<div class="panel panel-default">    
	 	<!-- Default panel contents -->
	 	<div class="panel-heading">
	 	<!-- <button type="button" class="btn btn-default btn-vlg"> -->

	 	<form action="/like">{{ likes }}
	 	<input type="hidden" name="listId" value="{{listId}}">
    		<input type="submit" class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>  <b>{{ title }} </b> <br>
    	</form>
		<!-- </button> -->
    	</div>

    	{{#isAdmin}}

    	id: {{_id}} <br>
    	dateCreated : {{ dateCreated }} <br>
    	Owner : {{ owner }} <br>
    	Score : {{ score }} <br>
    	Votes : {{ votes }} <br>
    	Comments : {{ comments }} <br>
    	Likes : {{ likes }} <br>

    	Items : {{ items }}

    	{{/isAdmin}}

<!--     	<div>
    		<div style="background-color:blue;width:50px;height:50px;float:left"></div>
    		<div style="background-color:green;width:50px;height:50px;float:left"></div>
    	</div> -->
		<div class="panel-body">
			<br>
			{{#items}}
				<div class="panel panel-default">
				<!-- {{.}} -->
					<div class="panel-heading" style="overflow:hidden;">
						<div style="height:100%;float:left">
							<div class="arrow-up"></div>
							<div class="netVote">0</div>						
							<div class="arrow-down"></div>
						</div>
    					<div style="height:100%;float:left;vertical-align:middle;text-align:center;display:table-cell;">
    						<div style="height:100%;vertical-align:middle;text-align:center;display:table-cell;">{{header}}</div>
    					</div>
						 
					</div>
					<!-- <span class="vote"> </span> -->
<!-- 					<button type="button" class="btn btn-default btn-vlg">
					<div style="height:100px;width:100px">
						<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
					</button>
					</div> -->
					<div class="panel-body">{{content}}</div>
				</div>
			{{/items}}
		</div>    	
	
	</div>        	

    {{/lists}}


	<div class="panel panel-default">
	  <!-- Default panel contents -->
	  <div class="panel-heading">Panel heading (id : )</div>
	  <div class="panel-body">
	    <p>...</p>
	  </div>

	  <!-- List group -->
	  <ul class="list-group">
	    <li class="list-group-item"> list-item </li>
	  </ul>
	</div>    

  </body>
</html>